<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>AiStock - 목록</title>
    <style>
        .gap-plus { color: red; }
        .gap-minus { color: blue; }
    </style>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<div class="container">
    <div class="py-4 text-center">
        <h2>예측 데이터 목록</h2>
        <p class="text-muted">각 종목별 가장 최신(Active) 데이터만 표시됩니다.</p>
    </div>

    <div class="mb-3 text-end">
        <a class="btn btn-primary" th:href="@{/stocks/new}">새 데이터 등록</a>
    </div>

    <table class="table table-hover border">
        <thead class="table-light">
        <tr>
            <th>날짜</th>
            <th>티커</th>
            <th>종목명</th>
            <th>현재가</th>
            <th>예측가</th>
            <th>예측변동</th>
            <th>상태</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="stock : ${stocks}">
            <td th:text="${stock.date}">2026-01-12</td>
            <td th:text="${stock.ticker}">AAPL</td>
            <td th:text="${stock.name}">애플</td>
            <td th:text="${#numbers.formatInteger(stock.curPrice, 0, 'COMMA')}">150,000</td>
            <td th:text="${#numbers.formatInteger(stock.predictPrice, 0, 'COMMA')}">160,000</td>
            <td th:class="${stock.predictGap >= 0} ? 'gap-plus' : 'gap-minus'">
                <span th:text="${stock.predictGap > 0 ? '+' : ''}"></span>
                <span th:text="${#numbers.formatInteger(stock.predictGap, 0, 'COMMA')}">10,000</span>
            </td>
            <td>
                <span class="badge bg-success" th:if="${stock.useYN == 'Y'}">Active</span>
                <span class="badge bg-secondary" th:unless="${stock.useYN == 'Y'}">History</span>
            </td>
        </tr>
        <tr th:if="${stocks.isEmpty()}">
            <td colspan="7" class="text-center py-4 text-muted">등록된 데이터가 없습니다.</td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>